<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸°ç§€é›…è‹‘ç¾é£Ÿæ¢ç´¢åœ°å›¾ | ç²¾å‡†å®šä½ç‰ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Playfair+Display:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Crimson Text', serif;
            background: transparent;
            color: #2c3e50;
            line-height: 1.7;
            overflow-x: hidden;
            position: relative;
        }
        
        /* å¤šå±‚èƒŒæ™¯å›¾ç‰‡å®¹å™¨ */
        .background-image-1 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/1.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.8;
            z-index: -11;
        }
        
        .background-image-2 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/2.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.15;
            z-index: -10;
            mix-blend-mode: overlay;
        }
        
        .background-image-3 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/3.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.12;
            z-index: -9;
            mix-blend-mode: soft-light;
        }
        
        .background-image-4 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/4.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.1;
            z-index: -8;
            mix-blend-mode: multiply;
        }
        
        .background-image-5 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/5.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.08;
            z-index: -7;
            mix-blend-mode: overlay;
        }
        
        .background-image-6 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/6.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.08;
            z-index: -6;
            mix-blend-mode: color-burn;
        }
        
        .background-image-7 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/7.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.07;
            z-index: -5;
            mix-blend-mode: darken;
        }
        
        .background-image-8 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/8.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.06;
            z-index: -4;
            mix-blend-mode: screen;
        }
        
        .background-image-9 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/9.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.06;
            z-index: -3;
            mix-blend-mode: luminosity;
        }
        
        .background-image-10 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/10.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.05;
            z-index: -2;
            mix-blend-mode: difference;
        }
        
        .background-image-11 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./picture/11.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.05;
            z-index: -1;
            mix-blend-mode: hue;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            background: transparent;
            margin-top: 20px;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        
        header {
            text-align: center;
            padding: 60px 0;
            background: transparent;
            position: relative;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"><defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23ecf0f1;stop-opacity:0.1" /><stop offset="100%" style="stop-color:%23bdc3c7;stop-opacity:0.05" /></linearGradient></defs><rect width="100%" height="100%" fill="url(%23grad1)"/><circle cx="80" cy="60" r="3" fill="%23e74c3c" opacity="0.2"/><circle cx="320" cy="240" r="2" fill="%2327ae60" opacity="0.15"/><circle cx="200" cy="150" r="1.5" fill="%233498db" opacity="0.2"/><path d="M50,100 Q150,50 250,100 Q350,150 380,120" stroke="%2395a5a6" stroke-width="1" fill="none" opacity="0.15"/><path d="M20,200 Q120,180 220,200 Q320,220 380,200" stroke="%23bdc3c7" stroke-width="0.8" fill="none" opacity="0.1"/><polygon points="60,80 65,70 70,80 65,90" fill="%23e67e22" opacity="0.1"/><polygon points="340,180 345,170 350,180 345,190" fill="%23f39c12" opacity="0.08"/></svg>'),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="%23bdc3c7" opacity="0.3"/><circle cx="80" cy="80" r="1.5" fill="%23bdc3c7" opacity="0.2"/><circle cx="60" cy="30" r="1" fill="%23bdc3c7" opacity="0.4"/></svg>') repeat;
            pointer-events: none;
            border-radius: 20px 20px 0 0;
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 900;
            color: #2c3e50;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .subtitle {
            font-style: italic;
            font-size: 1.4rem;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        
        .intro {
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.1rem;
            color: #34495e;
            background: transparent;
            padding: 30px;
            border-radius: 15px;
        }
        
        .map-section {
            margin: 80px 0;
            background: transparent;
            border-radius: 20px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .map-header {
            background: transparent;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .map-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .map-container {
            padding: 0;
            background: transparent;
            position: relative;
        }
        
        .map-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(52, 152, 219, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(230, 126, 34, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(39, 174, 96, 0.05) 0%, transparent 50%),
                linear-gradient(45deg, transparent 40%, rgba(149, 165, 166, 0.03) 50%, transparent 60%);
            pointer-events: none;
            z-index: 1;
        }
        
        .map-background-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="%23ecf0f1" stroke-width="0.5" opacity="0.3"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/><circle cx="50" cy="50" r="2" fill="%23bdc3c7" opacity="0.2"/><circle cx="150" cy="150" r="1.5" fill="%2395a5a6" opacity="0.15"/><path d="M30,30 Q70,10 110,30 T190,30" stroke="%23ecf0f1" stroke-width="1" fill="none" opacity="0.2"/></svg>');
            opacity: 0.6;
            pointer-events: none;
            z-index: 2;
        }
        
        #map-div {
            width: 100%;
            height: 700px;
            position: relative;
            z-index: 10;
            border-radius: 10px;
            margin: 10px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .restaurants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 80px 0;
        }
        
        .restaurant-card {
            background: transparent;
            border-radius: 15px;
            padding: 30px;
            border-left: 5px solid;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .restaurant-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transform: translate(30%, -30%);
            z-index: 1;
        }
        
        .restaurant-card:hover {
            transform: translateY(-8px);
        }
        
        .price-economy { border-left-color: #27ae60; }
        .price-mid { border-left-color: #3498db; }
        .price-luxury { border-left-color: #e67e22; }
        
        .restaurant-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px dotted #ecf0f1;
            padding-bottom: 10px;
        }
        
        .cuisine-tag {
            display: inline-block;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .price-info {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .price-economy .price-info { color: #27ae60; }
        .price-mid .price-info { color: #3498db; }
        .price-luxury .price-info { color: #e67e22; }
        
        .distance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        
        .distance-item {
            text-align: center;
        }
        
        .distance-label {
            font-size: 0.85rem;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .distance-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: #34495e;
        }
        
        .keywords {
            color: #555;
            font-style: italic;
            margin: 15px 0;
            padding: 15px;
            background: rgba(116, 185, 255, 0.1);
            border-radius: 8px;
            border-left: 3px solid #74b9ff;
        }
        
        .address {
            background: rgba(39, 174, 96, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 3px solid #27ae60;
            font-size: 0.95rem;
            color: #555;
        }
        
        .legend {
            background: transparent;
            padding: 30px;
            border-radius: 15px;
            margin: 40px 0;
            backdrop-filter: blur(8px);
        }
        
        .legend h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .legend-items {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: #f8f9fa;
            border-radius: 25px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .economy { background-color: #27ae60; }
        .mid-range { background-color: #3498db; }
        .luxury { background-color: #e67e22; }
        .home { background-color: #e74c3c; }
        
        footer {
            text-align: center;
            padding: 60px 0;
            background: transparent;
            color: white;
            margin-top: 80px;
        }
        
        footer p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .restaurants-grid { grid-template-columns: 1fr; }
            .distance-grid { grid-template-columns: 1fr; }
            .legend-items { flex-direction: column; align-items: center; }
            #map-div { height: 500px; }
            
            .background-image-1 {
                width: 70%;
                height: 40%;
            }
            
            .background-image-2 {
                width: 65%;
                height: 50%;
            }
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        .coordinates-display {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            font-family: monospace;
            font-size: 0.9rem;
            color: #34495e;
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯å›¾ç‰‡å®¹å™¨ -->
    <div class="background-image-1"></div>
    <div class="background-image-2"></div>
    <div class="background-image-3"></div>
    <div class="background-image-4"></div>
    <div class="background-image-5"></div>
    <div class="background-image-6"></div>
    <div class="background-image-7"></div>
    <div class="background-image-8"></div>
    <div class="background-image-9"></div>
    <div class="background-image-10"></div>
    <div class="background-image-11"></div>
    
    <!-- èƒŒæ™¯éŸ³ä¹æ§åˆ¶ -->
    <div id="music-control" style="position: fixed; top: 20px; right: 20px; z-index: 1000; background: rgba(255,255,255,0.8); padding: 10px; border-radius: 5px; cursor: pointer;">
        ğŸµ ç‚¹å‡»æ’­æ”¾éŸ³ä¹
    </div>
    <audio id="background-music" loop preload="auto">
        <source src="./picture/å¤©ç©ºä¹‹åŸ-æå¿—-é’¢ç´ç‰ˆ.ogg" type="audio/ogg">
        <source src="./picture/å¤©ç©ºä¹‹åŸ-æå¿—-é’¢ç´ç‰ˆ.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
    </audio>
    
    <main class="container">
        <header>
            <!-- Header content removed as requested -->
        </header>

        <section class="map-section">
            <div class="map-header">
                <h2>äº’åŠ¨å¼ç¾é£Ÿåœ°å›¾</h2>
                <p>ç‚¹å‡»åœ°å›¾ä¸Šçš„æ ‡è®°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
            </div>
            <div class="map-container">
                <div class="map-background-pattern"></div>
                <div id="map-div"></div>
            </div>
        </section>

        <section class="legend">
            <h3>é¤å…åˆ†ç±»å›¾ä¾‹</h3>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color economy"></div>
                    <span>ç»æµå®æƒ  (Â¥100-200)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color mid-range"></div>
                    <span>ä¸­æ¡£ç²¾é€‰ (Â¥200-350)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color luxury"></div>
                    <span>é«˜ç«¯å¥¢å (Â¥350+)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color home"></div>
                    <span>ä¸°ç§€é›…è‹‘ (èµ·ç‚¹)</span>
                </div>
            </div>
        </section>

        <section class="restaurants-grid" id="restaurants-container">
            <!-- é¤å…å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </section>
    </main>

    <footer>
        <div class="container">
            <p>Â© 2025 ä¸°ç§€é›…è‹‘ç¾é£Ÿæ¢ç´¢åœ°å›¾ - è®©ç¾é£Ÿè§¦æ‰‹å¯åŠ</p>
        </div>
    </footer>

    <script>
        // é¤å…æ•°æ® - å®Œæ•´æ›´æ–°ç‰ˆæœ¬
        const restaurantData = [
            {
                name: "é†‰è¾‰çš‡(ä¸­ä»¥åˆ›æ–°å›­åº—)",
                cuisine: "ç²¤èœ",
                price: 369,
                directDistance: 3.1,
                taxiDistance: "4.8km",
                taxiTime: "15åˆ†é’Ÿ",
                subwayDistance: "10.4km",
                subwayTime: "42åˆ†é’Ÿ",
                keywords: "ç²¤å¼è±ªåå®´è¯·ã€æµ·é²œå•†åŠ¡å¥—é¤ã€é»‘æ¾éœ²çƒ©èŠ±èƒ¶è‚šã€å¤å¤å·¥ä¸šé£ç¯å¢ƒ",
                address: "ç¥ç¥è¿å±±è·¯111å·ä¸­ä»¥åˆ›æ–°å›­4-5å·æ¥¼1-2å±‚",
                environment: "å¤å¤å·¥ä¸šé£ç¯å¢ƒï¼Œè®¾æ–½é½å…¨",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "é«˜ç«¯å¥¢å",
                lat: 31.273802,
                lon: 121.377367
            },
            {
                name: "å–œé¼æµ·èƒ†æ°´é¥º(ä¸Šæµ·æ³¸å®šè·¯åº—)",
                cuisine: "ä¸œåŒ—èœ",
                price: 120,
                directDistance: 8.0,
                taxiDistance: "15.2km",
                taxiTime: "27åˆ†é’Ÿ",
                subwayDistance: "12.8km",
                subwayTime: "55åˆ†é’Ÿ",
                keywords: "æµ·èƒ†æ°´é¥ºã€ä¸œåŒ—èœã€æ‰‹å·¥ç°åŒ…",
                address: "æ³¸å®šè·¯276å¼„7å·æ¥¼",
                environment: "è½»å¥¢é£æ ¼ï¼Œç¯å¢ƒé›…è‡´ï¼Œé€‚åˆå•†åŠ¡å®´è¯·",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "ç»æµå®æƒ ",
                lat: 31.225646,
                lon: 121.387905
            },
            {
                name: "ä¸°æ”¶æ—¥(åœºä¸­è·¯åº—)",
                cuisine: "æœ¬å¸®èœ",
                price: 150,
                directDistance: 0.3,
                taxiDistance: "4.7km",
                taxiTime: "14åˆ†é’Ÿ",
                subwayDistance: "13.7km",
                subwayTime: "48åˆ†é’Ÿ",
                keywords: "æœ¬å¸®èœã€æµ·é²œã€å®¶åº­èšé¤",
                address: "åœºä¸­è·¯4066å·(åœºä¸­è·¯åœ°é“ç«™1å·å£æ­¥è¡Œ270ç±³)",
                environment: "å®¶åº­èšä¼šé¦–é€‰ï¼Œå¹²å‡€æ•´æ´ï¼Œé€‚åˆå©šå®´",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "ç»æµå®æƒ ",
                lat: 31.302285,
                lon: 121.416287
            },
            {
                name: "å¾è®°æµ·é²œ(å—æŸä¸œè·¯åº—)",
                cuisine: "æµ·é²œç²¤èœ",
                price: 280,
                directDistance: 6.2,
                taxiDistance: "17.6km",
                taxiTime: "41åˆ†é’Ÿ",
                subwayDistance: "18.9km",
                subwayTime: "1å°æ—¶2åˆ†é’Ÿ",
                keywords: "æµ·é²œã€ç²¤èœã€å•†åŠ¡å®´è¯·",
                address: "æ’åŸºåäººè´­ç‰©ä¸­å¿ƒ6Få¾è®°æµ·é²œ(å—æŸä¸œè·¯åº—)",
                environment: "è£…ä¿®é«˜é›…ï¼Œé€‚åˆå•†åŠ¡å®´è¯·å’Œå®¶åº­èšé¤",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "ä¸­æ¡£ç²¾é€‰",
                lat: 31.237803,
                lon: 121.484322
            },
            {
                name: "ä¸Šæµ·æ»©é¤å…(æ–°å¤©åœ°åº—)",
                cuisine: "æœ¬å¸®åˆ›æ„èœ",
                price: 400,
                directDistance: 7.1,
                taxiDistance: "17.9km",
                taxiTime: "45åˆ†é’Ÿ",
                subwayDistance: "18.1km",
                subwayTime: "1å°æ—¶",
                keywords: "æœ¬å¸®èœã€åˆ›æ„èœã€å¤å¤é£æƒ…",
                address: "é»„é™‚å—è·¯358å·",
                environment: "åŸå¸‚ç‰¹è‰²ç¾é£Ÿï¼Œç¯å¢ƒé«˜é›…ï¼Œé€‚åˆå•†åŠ¡å®´è¯·",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "é«˜ç«¯å¥¢å",
                lat: 31.220725,
                lon: 121.475327
            },
            {
                name: "ç¾é¾„ç¼˜(æ´›å…‹Â·å¤–æ»©æºåº—)",
                cuisine: "æ±Ÿæµ™èœ",
                price: 350,
                directDistance: 6.3,
                taxiDistance: "16.2km",
                taxiTime: "50åˆ†é’Ÿ",
                subwayDistance: "19.6km",
                subwayTime: "1å°æ—¶13åˆ†é’Ÿ",
                keywords: "æ±Ÿæµ™èœã€æ°‘å›½é£æƒ…ã€éœ²å°æ™¯è§‚",
                address: "å¥³é’å¹´ä¼šå¤§æ¥¼133å·6æ¥¼",
                environment: "åŸå¸‚ç‰¹è‰²ç¾é£Ÿï¼Œå£æ„Ÿç»†è…»",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "é«˜ç«¯å¥¢å",
                lat: 31.241816,
                lon: 121.48802
            },
            {
                name: "æµ·æ¹¾èŸ(åŒ—å¤–æ»©åº—)",
                cuisine: "ç²¤èœ",
                price: 600,
                directDistance: 6.5,
                taxiDistance: "18.4km",
                taxiTime: "45åˆ†é’Ÿ",
                subwayDistance: "24.8km",
                subwayTime: "1å°æ—¶21åˆ†é’Ÿ",
                keywords: "ç²¤èœã€æ±Ÿæ™¯é¤å…ã€é«˜ç«¯å®´è¯·",
                address: "é»„æµ¦è·¯53å·ä¸Šæµ·æµ·æ¹¾å¤§å¦F27å±‚",
                environment: "èåˆèœï¼Œå•†åŠ¡å®´è¯·ï¼Œæ±Ÿæ™¯é¤å…",
                scenery: "æ±Ÿæ™¯",
                category: "é«˜ç«¯å¥¢å",
                lat: 31.244434,
                lon: 121.491704
            },
            {
                name: "å‡¯æ‚¦é…’åº—Â·äº«æ‚¦ä¸­é¤å…(ç¯çƒæ¸¯åº—)",
                cuisine: "ç²¤èœ",
                price: 250,
                directDistance: 7.9,
                taxiDistance: "14.8km",
                taxiTime: "29åˆ†é’Ÿ",
                subwayDistance: "12.7km",
                subwayTime: "46åˆ†é’Ÿ",
                keywords: "ç²¤èœã€é…’åº—ä¸­é¤ã€å•†åŠ¡å¥—é¤",
                address: "ä¸­å±±åŒ—è·¯3300å·ä¸Šæµ·ç¯çƒæ¸¯å‡¯æ‚¦é…’åº—4æ¥¼",
                environment: "é£æ™¯ä¸é”™ï¼Œè§†é‡å¼€é˜”ï¼Œé€‚åˆå®¶åº­èšé¤",
                scenery: "è§†é‡å¼€é˜”",
                category: "ä¸­æ¡£ç²¾é€‰",
                lat: 31.231893,
                lon: 121.412561
            },
            {
                name: "å“å°Šè½©(é“œå·è·¯åº—)",
                cuisine: "ç²¤èœ",
                price: 200,
                directDistance: 4.5,
                taxiDistance: "10.2km",
                taxiTime: "26åˆ†é’Ÿ",
                subwayDistance: "19km",
                subwayTime: "55åˆ†é’Ÿ",
                keywords: "ç²¤èœã€èŒ¶ç‚¹ã€é…’åº—é¤å…",
                address: "é“œå·è·¯50å·ä¸Šæµ·æ˜æ·ä¸‡ä¸½é…’åº—2å±‚",
                environment: "åŸå¸‚ç‰¹è‰²ç¾é£Ÿï¼Œæ–¹ä¾¿åœè½¦",
                scenery: "æ— ç‰¹æ®Šæ™¯è§‚æ ‡æ³¨",
                category: "ç»æµå®æƒ ",
                lat: 31.255821,
                lon: 121.420763
            }
        ];

        // å®¶çš„ç²¾ç¡®åæ ‡ - ä¸°ç§€é›…è‹‘ï¼ˆæ›´æ–°ï¼‰
        const homeLocation = {
            lat: 31.3328,
            lon: 121.4735,
            name: "ä¸°ç§€é›…è‹‘",
            address: "ä¸Šæµ·å¸‚å®å±±åŒºèµ°é©¬å¡˜è·¯1166å¼„1-11å·"
        };

        // æ›´æ–°ä»·æ ¼åˆ†ç±»é€»è¾‘
        const updateCategories = () => {
            restaurantData.forEach(restaurant => {
                if (restaurant.price <= 200) {
                    restaurant.category = "ç»æµå®æƒ ";
                } else if (restaurant.price <= 350) {
                    restaurant.category = "ä¸­æ¡£ç²¾é€‰";
                } else {
                    restaurant.category = "é«˜ç«¯å¥¢å";
                }
            });
        };

        // ä¸ºé¤å…æ•°æ®æ·»åŠ è®¡ç®—çš„è·ç¦»
        restaurantData.forEach(restaurant => {
            restaurant.distance = restaurant.directDistance; // ä½¿ç”¨æä¾›çš„ç²¾ç¡®ç›´çº¿è·ç¦»
        });

        // åˆ›å»ºé¤å…å¡ç‰‡
        function createRestaurantCards() {
            const container = document.getElementById('restaurants-container');
            updateCategories(); // æ›´æ–°åˆ†ç±»
            
            restaurantData.forEach((restaurant, index) => {
                const categoryClass = 
                    restaurant.category === 'ç»æµå®æƒ ' ? 'price-economy' :
                    restaurant.category === 'ä¸­æ¡£ç²¾é€‰' ? 'price-mid' : 'price-luxury';
                
                // ä¸ºæ¯ä¸ªé¤å…åˆ†é…å¯¹åº”çš„èƒŒæ™¯å›¾ç‰‡ (2-10å¯¹åº”å‰9ä¸ªé¤å…ï¼Œ11å¯¹åº”æœ€åä¸€ä¸ª)
                const backgroundImageNumber = index < 9 ? index + 2 : 11;
                
                const cardHTML = `
                    <div class="restaurant-card ${categoryClass}" style="position: relative;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-image: url('./picture/${backgroundImageNumber}.jpeg'); background-size: cover; background-position: center; opacity: 0.3; z-index: -1; border-radius: 15px;"></div>
                        <div class="restaurant-name">${restaurant.name}</div>
                        <div class="cuisine-tag">${restaurant.cuisine}</div>
                        <div class="price-info">äººå‡ Â¥${restaurant.price}</div>
                        
                        <div class="distance-grid">
                            <div class="distance-item">
                                <div class="distance-label">ç›´çº¿è·ç¦»</div>
                                <div class="distance-value">${restaurant.directDistance}km</div>
                            </div>
                            <div class="distance-item">
                                <div class="distance-label">æ‰“è½¦è·¯çº¿</div>
                                <div class="distance-value">${restaurant.taxiDistance}/${restaurant.taxiTime}</div>
                            </div>
                            <div class="distance-item">
                                <div class="distance-label">åœ°é“è·¯çº¿</div>
                                <div class="distance-value">${restaurant.subwayDistance}/${restaurant.subwayTime}</div>
                            </div>
                            <div class="distance-item">
                                <div class="distance-label">æ™¯è§‚ç‰¹è‰²</div>
                                <div class="distance-value">${restaurant.scenery}</div>
                            </div>
                        </div>
                        
                        <div class="keywords">${restaurant.keywords}</div>
                        <div class="address">åœ°å€ï¼š${restaurant.address}</div>
                        <div class="address" style="border-left-color: #3498db; background: rgba(52, 152, 219, 0.1);">ç¯å¢ƒç‰¹è‰²ï¼š${restaurant.environment}</div>
                    </div>
                `;
                container.innerHTML += cardHTML;
            });
        }

        // åˆ›å»ºåœ°å›¾
        function createMap() {
            const traces = [];
            
            // æ·»åŠ å®¶çš„ä½ç½® - ä¸°ç§€é›…è‹‘
            traces.push({
                type: 'scattergeo',
                lon: [homeLocation.lon],
                lat: [homeLocation.lat],
                text: [homeLocation.name],
                mode: 'markers',
                marker: {
                    size: 18,
                    color: '#e74c3c',
                    symbol: 'star',
                    line: { width: 3, color: 'white' }
                },
                name: 'ä¸°ç§€é›…è‹‘(èµ·ç‚¹)',
                hovertemplate: '<b>%{text}</b><br>åœ°å€: ' + homeLocation.address + '<br>åæ ‡: %{lon:.4f}, %{lat:.4f}<extra></extra>'
            });

            // æŒ‰ä»·æ ¼ç±»åˆ«åˆ†ç»„é¤å…
            const categories = {
                'ç»æµå®æƒ ': { color: '#27ae60', restaurants: [] },
                'ä¸­æ¡£ç²¾é€‰': { color: '#3498db', restaurants: [] },
                'é«˜ç«¯å¥¢å': { color: '#e67e22', restaurants: [] }
            };

            restaurantData.forEach(restaurant => {
                categories[restaurant.category].restaurants.push(restaurant);
            });

            // ä¸ºæ¯ä¸ªç±»åˆ«æ·»åŠ trace
            Object.keys(categories).forEach(category => {
                const categoryData = categories[category];
                if (categoryData.restaurants.length > 0) {
                    const hoverText = categoryData.restaurants.map(r => 
                        `<b>${r.name}</b><br>èœç³»: ${r.cuisine}<br>äººå‡: Â¥${r.price}<br>ç›´çº¿è·ç¦»: ${r.directDistance}km<br>æ‰“è½¦: ${r.taxiDistance}/${r.taxiTime}<br>åœ°é“: ${r.subwayDistance}/${r.subwayTime}<br>åœ°å€: ${r.address}<br>ç¯å¢ƒ: ${r.environment}<br>æ™¯è§‚: ${r.scenery}`
                    );
                    
                    traces.push({
                        type: 'scattergeo',
                        lon: categoryData.restaurants.map(r => r.lon),
                        lat: categoryData.restaurants.map(r => r.lat),
                        text: categoryData.restaurants.map(r => r.name),
                        mode: 'markers',
                        marker: {
                            size: 14,
                            color: categoryData.color,
                            line: { width: 2, color: 'white' },
                            opacity: 0.8
                        },
                        name: `${category} (Â¥${Math.min(...categoryData.restaurants.map(r => r.price))}-${Math.max(...categoryData.restaurants.map(r => r.price))})`,
                        hovertemplate: '%{customdata}<extra></extra>',
                        customdata: hoverText
                    });
                }
            });

            // æ·»åŠ è¿çº¿ï¼ˆä»ä¸°ç§€é›…è‹‘åˆ°å„é¤å…ï¼‰
            restaurantData.forEach(restaurant => {
                traces.push({
                    type: 'scattergeo',
                    lon: [homeLocation.lon, restaurant.lon],
                    lat: [homeLocation.lat, restaurant.lat],
                    mode: 'lines',
                    line: { width: 1.5, color: 'rgba(128,128,128,0.4)', dash: 'dot' },
                    showlegend: false,
                    hoverinfo: 'skip'
                });
            });

            const layout = {
                title: {
                    text: 'ä¸°ç§€é›…è‹‘å‘¨è¾¹ç¾é£Ÿæ¢ç´¢åœ°å›¾<br><sub>åŸºäºç²¾ç¡®GPSåæ ‡çš„ä¸Šæµ·é¤å…è·ç¦»ä¸ç‰¹è‰²æŒ‡å—</sub>',
                    x: 0.5,
                    font: { size: 24, family: 'serif', color: '#2F4F4F' }
                },
                geo: {
                    projection: { type: 'mercator' },
                    showland: true,
                    landcolor: 'rgb(250, 248, 240)',
                    coastlinecolor: 'rgb(180, 180, 180)',
                    showocean: true,
                    oceancolor: 'rgb(230, 245, 255)',
                    showlakes: true,
                    lakecolor: 'rgb(230, 245, 255)',
                    showrivers: true,
                    rivercolor: 'rgb(230, 245, 255)',
                    center: { lat: 31.30, lon: 121.43 },
                    lonaxis: { range: [121.35, 121.52] },
                    lataxis: { range: [31.20, 31.40] },
                    bgcolor: 'rgba(255,255,255,0)'
                },
                legend: {
                    orientation: 'v',
                    yanchor: 'top',
                    y: 0.95,
                    xanchor: 'left',
                    x: 0.02,
                    bgcolor: 'rgba(255,255,255,0.9)',
                    bordercolor: 'rgba(128,128,128,0.5)',
                    borderwidth: 1,
                    font: { size: 12 }
                },
                width: null,
                height: 700,
                paper_bgcolor: 'rgb(253, 253, 250)',
                font: { family: 'serif' },
                margin: { l: 0, r: 0, t: 60, b: 0 }
            };

            const config = {
                responsive: true,
                displayModeBar: false
            };

            Plotly.newPlot('map-div', traces, layout, config);
        }

        // éŸ³ä¹è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
        function initAutoPlayMusic() {
            const audio = document.getElementById('background-music');
            const musicControl = document.getElementById('music-control');
            
            // å°è¯•è‡ªåŠ¨æ’­æ”¾
            const attemptAutoPlay = () => {
                audio.play().then(() => {
                    musicControl.textContent = 'ğŸ”‡ ç‚¹å‡»æš‚åœéŸ³ä¹';
                    musicControl.style.display = 'block';
                }).catch(() => {
                    // è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œæ˜¾ç¤ºæ’­æ”¾æŒ‰é’®
                    musicControl.textContent = 'ğŸµ ç‚¹å‡»æ’­æ”¾éŸ³ä¹';
                    musicControl.style.display = 'block';
                });
            };
            
            // ç«‹å³å°è¯•è‡ªåŠ¨æ’­æ”¾
            attemptAutoPlay();
            
            // æ·»åŠ ç”¨æˆ·äº¤äº’åçš„è‡ªåŠ¨æ’­æ”¾
            const enableAutoPlay = () => {
                if (audio.paused) {
                    audio.play().then(() => {
                        musicControl.textContent = 'ğŸ”‡ ç‚¹å‡»æš‚åœéŸ³ä¹';
                    }).catch(() => {
                        musicControl.textContent = 'ğŸµ ç‚¹å‡»æ’­æ”¾éŸ³ä¹';
                    });
                }
                // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ï¼Œé¿å…é‡å¤æ‰§è¡Œ
                document.removeEventListener('click', enableAutoPlay);
                document.removeEventListener('keydown', enableAutoPlay);
                document.removeEventListener('touchstart', enableAutoPlay);
            };
            
            // ç›‘å¬ç”¨æˆ·äº¤äº’äº‹ä»¶
            document.addEventListener('click', enableAutoPlay);
            document.addEventListener('keydown', enableAutoPlay);
            document.addEventListener('touchstart', enableAutoPlay);
            
            // éŸ³ä¹æ§åˆ¶æŒ‰é’®åŠŸèƒ½
            musicControl.addEventListener('click', function(e) {
                e.stopPropagation(); // é˜²æ­¢è§¦å‘è‡ªåŠ¨æ’­æ”¾äº‹ä»¶
                if (audio.paused) {
                    audio.play().then(() => {
                        musicControl.textContent = 'ğŸ”‡ ç‚¹å‡»æš‚åœéŸ³ä¹';
                    }).catch(() => {
                        musicControl.textContent = 'ğŸµ éŸ³é¢‘åŠ è½½å¤±è´¥';
                    });
                } else {
                    audio.pause();
                    musicControl.textContent = 'ğŸµ ç‚¹å‡»æ’­æ”¾éŸ³ä¹';
                }
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            createRestaurantCards();
            createMap();
            initAutoPlayMusic();
        });
    </script>
</body>
</html>